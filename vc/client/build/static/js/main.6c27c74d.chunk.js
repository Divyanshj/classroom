(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){e.exports=n(169)},130:function(e,t){},133:function(e,t,n){e.exports=n.p+"static/media/image1.f142bb56.svg"},157:function(e,t){},159:function(e,t){},169:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),i=n.n(o),s=n(97),c=n(4),l=n(15),u=n(86),m=n.n(u)()("/"),d=n(183),p=n(186),g=n(187),f=n(188),b=n(189),x=(n(133),n(185)),v=Object(d.a)((function(e){return{title:{flexGrow:1,fontFamily:"'Pacifico', cursive",fontSize:"2.2rem",color:"#B3B3B3"},main:{backgroundColor:"#FFFFFF",borderRadius:"15px",padding:"10px"},button:{backgroundColor:"#404040",color:"#B3B3B3",fontFamily:"'Montserrat', sans-serif",fontSize:"1.1rem",borderRadius:"10px",textTransform:"none",marginLeft:"15px"},meetingID:{color:"#FFFFFFF",marginLeft:"14px",fontFamily:"'Ubuntu', sans-serif",fontSize:"1rem",marginRight:"14px"}}}));var E=function(e){return v(),r.a.createElement(x.a,null)},y=Object(d.a)((function(e){return{body:{display:"block",paddingTop:"10px",backgroundColor:"#FFFFFF"},paper:{marginRight:"100px",marginLeft:"100px",background:"#e0e0e0",textAlign:"center"},mainTitle:{fontFamily:"'Ubuntu', sans-serif",color:"#B3B3B3",textAlign:"center",fontSize:"4rem",paddingTop:"20px",paddingBottom:"20px",paddingLeft:"50px",paddingRight:"50px"},meetingStart:{padding:"10px",paddingLeft:"20px",paddingRight:"20px",borderRadius:"20px",fontFamily:"'Montserrat', sans-serif",color:"#000000",fontSize:"2rem"},inputBox:{backgroundColor:"#404040",marginTop:"10px",borderRadius:"20px",paddingLeft:"20px",paddingTop:"8px",paddingBottom:"8px",color:"#B3B3B3",outline:"none"},start:{fontFamily:"'Montserrat', sans-serif",fontSize:"1.1rem",borderRadius:"20px",textTransform:"none",marginTop:"20px",marginBottom:"20px"},label:{fontFamily:"'Ubuntu', sans-serif",color:"#B3B3B3",marginRight:"15px"}}}));var h=function(e){var t=y(),n=Object(a.useRef)(),o=Object(a.useRef)(),i=Object(a.useState)(!1),s=Object(l.a)(i,2),c=s[0],u=s[1],d=Object(a.useState)(""),x=Object(l.a)(d,2),v=x[0],h=x[1],B=r.a.useState(!1),N=Object(l.a)(B,2),j=N[0],k=N[1];function w(){k(!0)}return Object(a.useEffect)((function(){m.on("errorUserExists",(function(t){var a=t.clients,r=t.userName,i=t.socketList,s=!1;if(a.forEach((function(e){i[e].userName===r&&(s=!0)})),s)u(s),h("User name already exist");else{var c=n.current.value,l=o.current.value;sessionStorage.setItem("user",l),e.history.push("/room/".concat(c))}}))}),[e.history]),r.a.createElement("div",{className:t.body},r.a.createElement(E,{meeting:!1}),r.a.createElement(p.a,{container:!0,spacing:1},r.a.createElement(p.a,{item:!0,xs:6},r.a.createElement(g.a,{className:t.paper,style:{marginRight:"100px",marginLeft:"100p",backgroundColor:"#ffffff",paddingBottom:"10px"}},r.a.createElement("div",{style:{backgroundColor:"#FFFFFF",display:"inline-flex",marginTop:"30px",borderRadius:"30px",marginBottom:"20px"}},r.a.createElement(f.a,{variant:"body1",className:t.meetingStart,noWrap:!0},"Start VideoCall !!")),r.a.createElement("br",null),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"primary",variant:"contained",style:{marginRight:"15px"},onClick:w},"New Call"),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"secondary",variant:"contained",style:{marginLeft:"15px"},onClick:w},"Join Call"),j?r.a.createElement("div",null,r.a.createElement("span",{className:t.label}," Name : "),r.a.createElement("input",{className:t.inputBox,ref:o,style:{marginLeft:"12px"}}),r.a.createElement("br",null),r.a.createElement("span",{className:t.label}," RoomId : "),r.a.createElement("input",{className:t.inputBox,ref:n}),r.a.createElement("br",null),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"primary",variant:"contained",style:{marginRight:"15px"},onClick:function(){var e=n.current.value,t=o.current.value;e&&t?m.emit("checkUser",{roomId:e,userName:t}):(u(!0),h("Enter Room Name or User Name"))}},"Les Go !!"),c?r.a.createElement("p",null,v):null):r.a.createElement("div",null)))))},B=n(40),N=n(33),j=n(19),k=n(57),w=n.n(k);var C=function(e){var t=Object(a.useRef)(),n=e.peer,o=e.width;return Object(a.useEffect)((function(){n.on("stream",(function(e){t.current.srcObject=e}))}),[n]),r.a.createElement("video",{playsInline:!0,autoPlay:!0,ref:t,style:{backgroundSize:"cover",overflow:"hidden",width:o}})},O=n(90),S=n.n(O),F=Object(d.a)((function(e){return{paper:{backgroundColor:"#282828",borderRadius:"50px",marginTop:"15px",paddingTop:"10px"},chatHeading:{backgroundColor:"#404040",padding:e.spacing(1),textAlign:"center",borderRadius:"30px",marginTop:"15px",paddingBottom:"5px"},chatBox:{fontFamily:"'Montserrat', sans-serif",fontSize:"1.4rem",color:"#B3B3B3",marginBottom:"10px",display:"inline-block"},icon:{color:"#B3B3B3",textAlign:"center",marginRight:"10px",verticalAlign:"middle"},messageBox:{backgroundColor:"#404040",padding:e.spacing(2),borderRadius:"30px",marginTop:"20px",height:"400px",overflowY:"auto"},inputBox:{backgroundColor:"#282828",color:"#B3B3B3",borderRadius:"20px",padding:"15px",width:"320px",outline:"none",marginBottom:"15px"},sendBox:{marginTop:"30px",textAlign:"center"},message:{color:"#B3B3B3",backgroundColor:"#282828",display:"inline-block",marginBottom:"10px",padding:"10px",borderRadius:"20px"},title:{fontSize:"0.6rem",margin:0,fontFamily:"'Ubuntu', sans-serif"},body:{margin:"1px",fontSize:"1rem",fontFamily:"'Montserrat', sans-serif"},sent:{textAlign:"right"},received:{textAlign:"left"}}}));var R=function(e){var t=e.roomID,n=sessionStorage.getItem("user"),o=Object(a.useState)([]),i=Object(l.a)(o,2),s=i[0],c=i[1],u=Object(a.useRef)(null),d=Object(a.useRef)(),p=F();return Object(a.useEffect)((function(){m.on("receiveMessage",(function(e){var t=e.msg,n=e.sender;c((function(e){return[].concat(Object(B.a)(e),[{sender:n,msg:t}])}))}))}),[]),r.a.createElement("div",null,r.a.createElement(g.a,{className:p.chatHeading},r.a.createElement(S.a,{fontSize:"large",className:p.icon}),r.a.createElement(f.a,{variant:"body1",className:p.chatBox},"Messages")),r.a.createElement("div",{className:p.messageBox},s&&s.map((function(e,t){var a=e.sender,o=e.msg;return a===n?r.a.createElement("div",{className:p.sent,key:t},r.a.createElement("div",{className:p.message},r.a.createElement("p",{className:p.title},a),r.a.createElement("p",{className:p.body},o))):r.a.createElement("div",{className:p.received},r.a.createElement("div",{className:p.message},r.a.createElement("p",{className:p.title},a),r.a.createElement("p",{className:p.body},o)))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:u})),r.a.createElement("div",{className:p.sendBox},r.a.createElement("input",{className:p.inputBox,ref:d,onKeyUp:function(e){if("Enter"===e.key){var a=e.target.value;a&&(m.emit("sendMessage",{roomID:t,msg:a,sender:n}),d.current.value="")}},placeholder:"Press Enter to send Message"})))},T=n(91),A=n.n(T),z=n(96),I=n.n(z),D=n(93),U=n.n(D),L=n(92),M=n.n(L),P=n(94),V=n.n(P),G=n(95),J=n.n(G),Q=new Date,Z=Q.toLocaleDateString("en-US",{day:"numeric",month:"short"}),_=Q.toLocaleDateString("en-US",{weekday:"long"}),q=Object(d.a)((function(e){return{root:{paddingBottom:"30px",marginBottom:"15px"},paper:{backgroundColor:"#FFFFFF",paddingLeft:"23px",marginTop:"15px",paddingTop:"10px"},button:{padding:"15px",borderRadius:"100%",backgroundColor:"#B3B3B3",color:"#282828",marginTop:"30px"},button1:{padding:"15px",borderRadius:"100%",marginTop:"30px"},date:{textAlign:"center",color:"#B3B3B3",fontFamily:"'Montserrat', sans-serif",fontSize:"1.4rem"}}}));var K=function(e){var t=q();return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"h6",className:t.date},Z,","),r.a.createElement(f.a,{variant:"h6",className:t.date},_),r.a.createElement(g.a,{className:t.paper,style:{marginTop:"40px"}},r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button,onClick:e.toggleCameraAudio,"data-switch":"audio",title:"Toggle Audio"},e.userVideoAudio.audio?r.a.createElement(A.a,{fontSize:"large"}):r.a.createElement(M.a,{fontSize:"large"})),r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button,"data-switch":"video",onClick:e.toggleCameraAudio,title:"Toggle Video"},e.userVideoAudio.video?r.a.createElement(U.a,{fontSize:"large"}):r.a.createElement(V.a,{fontSize:"large"})),e.leave?r.a.createElement(b.a,{size:"large",variant:"contained",color:"primary",className:t.button1,onClick:e.endCall,title:"Leave Room"},r.a.createElement(J.a,{fontSize:"large"})):r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button1,onClick:e.goToBack,title:"Leave Video"},r.a.createElement(I.a,{fontSize:"large"})))))},W=n(170),H=Object(W.a)({grandParent:{display:"flex",flexDirection:"row"},root:{backgroundColor:"#ffffff",padding:"15px"},parent:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",backgroundColor:"#ffffff",paddingTop:"150px"},child:{backgroundColor:"#ffffff",height:"350px",position:"relative",display:"flex",width:"430px",justifyContent:"center",marginRight:"20px",marginBottom:"20px"},writeName:{position:"absolute",color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"1.5rem",zIndex:"1",backgroundColor:"#282828",height:"180px",width:"380px",textAlign:"center",paddingTop:"150px"},parentbig:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",backgroundColor:"#181818",paddingTop:"10px"},childbig:{backgroundColor:"#282828",height:"270px",position:"relative",display:"flex",width:"360px",justifyContent:"center",marginRight:"20px",marginBottom:"20px"},writeNamebig:{position:"absolute",color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"1.5rem",zIndex:"1",backgroundColor:"#282828",height:"150px",width:"350px",textAlign:"center",paddingTop:"120px"},meetingEnd:{backgroundColor:"#181818",padding:"50px",textAlign:"center"},meetingEndTitle:{color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"2rem"}});var Y=function(e){var t=H(),n=Object(a.useState)([]),o=Object(l.a)(n,2),i=o[0],s=o[1],c=Object(a.useState)({localUser:{video:!0,audio:!0}}),u=Object(l.a)(c,2),d=u[0],g=u[1],f=Object(a.useState)(!0),b=Object(l.a)(f,2),x=b[0],v=b[1],y=Object(a.useState)(!1),h=Object(l.a)(y,2),k=h[0],O=h[1],S=Object(a.useRef)([]),F=Object(a.useRef)(),T=Object(a.useRef)(),A=e.match.params.roomID,z=sessionStorage.getItem("user");function I(e){return S.current.find((function(t){return t.peerID===e}))}function D(e,t,n,a,o){return r.a.createElement("div",{className:a,key:t},function(e,t,n){if(d.hasOwnProperty(e)&&!d[e].video)return r.a.createElement("div",{className:t,key:e},e)}(e.userName,o),r.a.createElement(C,{key:t,peer:e,width:n}))}Object(a.useEffect)((function(){return window.addEventListener("popstate",U),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){F.current.srcObject=e,T.current=e,m.emit("joinRoom",{roomID:A,userName:z}),m.on("userJoin",(function(t){var n=t.clients,a=t.socketList,r=[];n.forEach((function(t){var n=t,o=a[t].userName,i=a[t].video,s=a[t].audio;if(o!==z){var c=function(e,t,n){var a=new w.a({initiator:!0,trickle:!1,stream:n,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{username:"yq_BxvdCMrMv110BQ2bGPCD655MPBLy8UcPGPIS94u2JQdC3_xZqU_lfu1onKQ3gAAAAAGDR8wBjcnV5ZmZlc3Np",credential:"c92f9d3e-d365-11eb-8c7b-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]}});return a.on("signal",(function(n){m.emit("callUser",{userToCall:e,from:t,signal:n})})),a.on("disconnect",(function(){a.destroy()})),a}(n,m.id,e);c.userName=o,c.peerID=n,S.current.push({peerID:n,peer:c,userName:o}),r.push(c),g((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(N.a)({},c.userName,{video:i,audio:s}))}))}})),s(r)})),m.on("receiveCall",(function(t){var n=t.signal,a=t.from,r=t.info,o=r.userName,i=r.video,c=r.audio;if(!I(a)){var l=function(e,t,n){var a=new w.a({initiator:!1,trickle:!1,stream:n,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{username:"yq_BxvdCMrMv110BQ2bGPCD655MPBLy8UcPGPIS94u2JQdC3_xZqU_lfu1onKQ3gAAAAAGDR8wBjcnV5ZmZlc3Np",credential:"c92f9d3e-d365-11eb-8c7b-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]}});return a.on("signal",(function(e){m.emit("acceptCall",{signal:e,to:t})})),a.on("disconnect",(function(){a.destroy()})),a.signal(e),a}(n,a,e);l.userName=o,S.current.push({peerID:a,peer:l,userName:o}),s((function(e){return[].concat(Object(B.a)(e),[l])})),g((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(N.a)({},l.userName,{video:i,audio:c}))}))}})),m.on("callAccepted",(function(e){var t=e.signal;I(e.answerId).peer.signal(t)})),m.on("userLeave",(function(e){var t=I(e.userId);t.peer.destroy(),s((function(e){return e=e.filter((function(e){return e.peerID!==t.peer.peerID})),Object(B.a)(e)}))}))})),m.on("toggleVideo",(function(e){var t=e.userId,n=e.switchTarget,a=I(t);g((function(e){var t=e[a.userName].video,r=e[a.userName].audio;return"video"===n?t=!t:r=!r,Object(j.a)(Object(j.a)({},e),{},Object(N.a)({},a.userName,{video:t,audio:r}))}))})),function(){m.disconnect()}}),[]);var U=function(e){e.preventDefault(),m.emit("finish",{roomID:A}),sessionStorage.removeItem("user"),window.location.href="/"};return r.a.createElement("div",{className:t.root},r.a.createElement(E,{meeting:!0,room:A}),r.a.createElement("div",null,r.a.createElement(p.a,{container:!0,spacing:2},r.a.createElement(p.a,{item:!0,xs:6,sm:1},r.a.createElement(K,{goToBack:function(e){e.preventDefault(),v(!1),O(!0),m.emit("leaveRoom",{roomID:A})},toggleCameraAudio:function(e){var t=e.currentTarget.getAttribute("data-switch");console.log(e.currentTarget.getAttribute("data-switch")),g((function(e){var n=e.localUser.video,a=e.localUser.audio;if("video"===t){n=!n,F.current.srcObject.getVideoTracks()[0].enabled=n}else{var r=F.current.srcObject.getAudioTracks()[0];a=!a,r?r.enabled=a:T.current.getAudioTracks()[0].enabled=a}return Object(j.a)(Object(j.a)({},e),{},{localUser:{video:n,audio:a}})})),m.emit("toggle",{roomID:A,switchTarget:t})},userVideoAudio:d.localUser,endCall:U,leave:k})),r.a.createElement(p.a,{item:!0,xs:6,sm:8},r.a.createElement("div",{className:t.grandParent},!i||i.length<2?r.a.createElement("div",{className:t.parent},x?r.a.createElement("div",{className:t.child},d.localUser.video?null:r.a.createElement("div",{className:t.writeName},z),r.a.createElement("video",{style:{backgroundSize:"cover",overflow:"hidden",width:"380px"},ref:F,autoPlay:!0,muted:!0})):r.a.createElement("div",{className:t.meetingEnd},r.a.createElement("p",{className:t.meetingEndTitle},"Video Chat Ended !!"),r.a.createElement("p",{className:t.meetingEndTitle},"You Can Still Chat with Others !!")),x&&i&&i.map((function(e,n){return D(e,n,"380px",t.child,t.writeName)}))):r.a.createElement("div",{className:t.parentbig},x?r.a.createElement("div",{className:t.childbig},d.localUser.video?null:r.a.createElement("div",{className:t.writeNamebig},z),r.a.createElement("video",{style:{backgroundSize:"cover",overflow:"hidden",width:"340px"},ref:F,autoPlay:!0,muted:!0})):null,x&&i&&i.map((function(e,n){return D(e,n,"340px",t.childbig,t.writeNamebig)}))))),r.a.createElement(p.a,{item:!0,xs:6,sm:3},r.a.createElement(R,{roomID:A})))))};var X=function(){return r.a.createElement(s.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:h}),r.a.createElement(c.a,{exact:!0,path:"/room/:roomID",component:Y})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.6c27c74d.chunk.js.map